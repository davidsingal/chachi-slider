/*
 * jQuery chachi chachi Slider v1.2
 * Free to use and abuse.
 * https://github.com/davidsingal/chachi-slider
 */


(function($){var opts={};var counter=1;var slider={init:function(options){var target=this,timer=null,interval=null;var settings=$.extend({auto:true,pause:3000,velocity:500,pagination:true,navigation:true,textPrev:"<",textNext:">"},options);var panelsWrapper=$("<div class=\"chachi-panels-wrapper\"></div>"),wrapper=$("<div class=\"chachi-wrapper\"></div>"),panels=target.find(".chachi-panel");target.append(wrapper);wrapper.append(panelsWrapper);panels.appendTo(panelsWrapper);target.show();var panelWidth=target.width();function sliderSize(){panels.css({"width":panelWidth+"px","margin-right":20+"px"});panelsWrapper.css("width",((panelWidth+20)*panels.length)+"px");opts.width=panelWidth;};sliderSize();if(settings.pagination&&panels.length>1){var pagination=$("<div class=\"chachi-pag\"></div>"),htmlNav="",links,t;target.append(pagination);for(var i=1;i<=panels.length;i++){htmlNav+="<li><a href=\"#panel"+i+"\">"+i+"</a></li>";}
pagination.append("<ul>"+htmlNav+"</ul>");links=pagination.find("a");$(links[0]).addClass("current");$.each(links,function(index,Element){$(Element).click(function(ev){ev.preventDefault();if(settings.auto)clearInterval(timer);t=this.href.split("#panel");counter=parseInt(t[1]);slider.transition(counter);if(settings.auto)timer=setInterval(interval,settings.pause);});});}
var prev,next;if(settings.navigation){var navigation=$("<div class=\"chachi-nav\"></div>");prev=$("<a href=\"#\" class=\"prev\">"+settings.textPrev+"</a>");next=$("<a href=\"#\" class=\"next\">"+settings.textNext+"</a>");navigation.append(prev).append(next);target.append(navigation);(counter==1)?prev.hide():prev.show();(counter==panels.length)?next.hide():next.show();prev.click(function(e){e.preventDefault();counter--;if(settings.auto)clearInterval(timer);if(counter<1)counter=panels.length-1;slider.transition(counter);if(settings.auto)timer=setInterval(interval,settings.pause);});next.click(function(e){e.preventDefault();counter++;if(settings.auto)clearInterval(timer);if(counter>panels.length)counter=1;slider.transition(counter);if(settings.auto)timer=setInterval(interval,settings.pause);});}
if(settings.auto){interval=function(){counter++;if(counter>panels.length)counter=1;slider.transition(counter);};timer=setInterval(interval,settings.pause);panels.hover(function(){clearInterval(timer);},function(){timer=setInterval(interval,settings.pause);});}
opts={pagination:settings.pagination,links:links,wrapper:panelsWrapper,velocity:settings.velocity,width:panelWidth,prev:prev,next:next,panels:panels};$(window).resize(function(){panelWidth=target.width();sliderSize();});},transition:function(x){if(opts.pagination)$(opts.links).removeClass("current");opts.wrapper.stop().animate({"left":-(x-1)*(opts.width+20)},opts.velocity,function(){if(opts.pagination)$(opts.links[x]).addClass("current");(x==1)?opts.prev.hide():opts.prev.show();(x==opts.panels.length)?opts.next.hide():opts.next.show();});},startAt:function(x){counter=x;if(opts.pagination)$(opts.links).removeClass("current");opts.wrapper.css("left",-(x-1)*(opts.width+20));if(opts.pagination)$(opts.links[x]).addClass("current");(x==1)?opts.prev.hide():opts.prev.show();(x==opts.panels.length)?opts.next.hide():opts.next.show();}};$.fn.chachiSlider=function(method){var self=this,_arguments=arguments;slider.init.apply(self,_arguments);};})(jQuery);